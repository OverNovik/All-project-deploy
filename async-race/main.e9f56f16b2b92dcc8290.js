(()=>{"use strict";var e={356:(e,t,n)=>{n.r(t)},7:(e,t,n)=>{n.r(t)},342:(e,t,n)=>{n.r(t)},272:(e,t,n)=>{n.r(t)},528:(e,t,n)=>{n.r(t)},171:(e,t,n)=>{n.r(t)},102:(e,t,n)=>{n.r(t)},373:(e,t,n)=>{n.r(t)},752:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const s=n(977),i=n(743);t.App=class{constructor(e){this.rootElement=e,this.header=new s.Header,this.main=new i.Main,this.rootElement.appendChild(this.header.element),this.rootElement.appendChild(this.main.element)}}},583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},199:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CarParamsInput=void 0,n(356);const s=n(583),i=n(166),r=n(185);class a extends s.BaseComponent{constructor(e,t){super("form",e),this.inputName=new r.Inputs(["name-area"],{type:"text"}),this.inputColor=new r.Inputs(["color-area"],{type:"color"}),this.btnSub=new i.Buttons(["onsubmit-btn"],t),this.element.appendChild(this.inputName.element),this.element.appendChild(this.inputColor.element),this.element.appendChild(this.btnSub.element),this.inputName.onInput((e=>{const t=e.target;console.log(t.value)}))}onSubmit(e){this.element.addEventListener("submit",(t=>{const n=this.inputsAll();e(n),t.preventDefault()}))}inputsAll(){return{name:this.inputName.getValInp(),color:this.inputColor.getValInp()}}setFormInfo(e){this.inputColor.setValInp(e.color),this.inputName.setValInp(e.name)}}t.CarParamsInput=a},881:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Car=void 0,n(7);const i=s(n(90)),r=n(583),a=n(166),o=n(990),c=n(657);class l extends r.BaseComponent{constructor(e){super("li",["car"]),this.carModel=e,this.runCar=()=>{const e=this.element.querySelector("svg"),t=this.element.querySelector("img"),n=Date.now()+1e3*Math.random(),s=setInterval((()=>{const i=e.getBoundingClientRect().x,r=t.getBoundingClientRect().x,a=Date.now()-n;e.style.left=a/5+"px",i>=r&&(clearInterval(s),this.finishHandler())}),20)},this.onFinish=e=>{this.finishHandler=e},this.returnToStart=()=>{this.element.querySelector("svg").style.left="0"},this.element.innerHTML=`\n      <div class="car__name">${e.name}</div>\n      <svg id="Capa_1" enable-background="new 0 0 512 512" height="80" viewBox="0 0 512 512" width="80" xmlns="http://www.w3.org/2000/svg" style="fill: ${e.color}">\n        <g>\n          <path d="m488.352 232.546c-14.363-7.5-29.437-13.586-44.802-18.089-3.975-1.162-8.142 1.113-9.307 5.088s1.113 8.142 5.088 9.307c14.426 4.228 28.583 9.944 42.079 16.991 1.493.779 2.887 1.687 4.196 2.685-8.189.082-16.242.426-22.486 1.634-13.958 2.701-16.888 9.799-16.888 15.277 0 15.413 20.757 28.934 44.42 28.934 2.141 0 4.256-.088 6.349-.228v7.03h-38.813c-9.049-13.155-24.2-21.802-41.338-21.802s-32.289 8.647-41.337 21.802h-215.328c-9.049-13.155-24.2-21.802-41.338-21.802s-32.289 8.647-41.337 21.802h-62.51v-17.87h10.1c4.142 0 7.5-3.357 7.5-7.5v-5.66h17.212c10.173 0 18.45-8.276 18.45-18.449v-6.456c0-3.809-1.156-7.47-3.342-10.589l-15.27-21.785h18.14c2.563 0 4.95-1.31 6.327-3.472 9.358-14.697 23.379-28.16 41.672-40.015 11.443-7.416 23.815-12.989 36.782-16.688-2.283 1.311-4.533 2.672-6.737 4.101-14.321 9.283-26.416 19.643-35.948 30.791-3.959 4.631-4.897 10.961-2.449 16.521 2.431 5.52 7.691 9.075 13.729 9.279 0 0 241.267 8.151 241.339 8.152.072 0 .144-.006.217-.008.205-.005.409-.013.609-.034l.025-.001c14.056-1.539 28.557-1.386 43.103.455 4.114.525 7.862-2.39 8.382-6.499s-2.39-7.862-6.5-8.382c-14.525-1.839-29.029-2.117-43.166-.83-11.833-11.043-23.407-21.695-34.44-31.697-26.438-23.954-60.594-38.196-96.174-40.102l-34.912-1.87c-33.017-1.762-64.839 6.613-92.019 24.226-18.694 12.114-33.433 25.917-43.868 41.074-24.944.108-27.163-.231-29.798.252-9.253 1.435-16.365 9.435-16.365 19.088v45.352c0 .029-.004.058-.004.087s.004.058.004.087v5.573h-7.08c-5.801 0-10.52 4.715-10.52 10.51v45.891c0 4.998 3.557 9.332 8.435 10.302l63.766 12.882c7.346 18.587 25.479 31.777 46.646 31.777 19.881 0 37.096-11.629 45.202-28.441h27.662c4.142 0 7.5-3.357 7.5-7.5s-3.358-7.5-7.5-7.5h-23.178c.295-2.195.461-4.43.461-6.705 0-4.621-.641-9.093-1.817-13.345h201.344c-1.176 4.252-1.817 8.724-1.817 13.345 0 2.275.167 4.51.461 6.705h-140.454c-4.142 0-7.5 3.357-7.5 7.5s3.358 7.5 7.5 7.5h144.938c8.106 16.813 25.321 28.441 45.201 28.441 19.881 0 37.096-11.629 45.202-28.441h22.85c14.943 0 27.1-12.157 27.1-27.1v-52.61c-.001-16.425-9.063-31.356-23.649-38.971zm-367.187-34.49c-.17-.385.021-.607.122-.727 21.064-24.635 53.969-44.655 91.824-49.022l15.644.838c2.493 9.235 5.863 31.47-.042 52.861l-107.04-3.617c-.172-.006-.367-.012-.508-.333zm221.566 7.803-98.697-3.335c4.521-19.328 3.048-39.271.403-52.117 28.254 3.709 54.995 16.007 76.226 35.244 7.151 6.483 14.534 13.245 22.068 20.208zm-289.469 39.38v6.456c0 1.902-1.547 3.449-3.45 3.449h-17.212v-37.939c0-.68.171-1.315.45-1.889l19.587 27.944c.408.582.625 1.267.625 1.979zm-38.262 75.791v-4.855h55.518c-1.424 5.151-2.007 10.372-1.757 15.716zm103.847 43.635c-19.379 0-35.146-15.767-35.146-35.146s15.767-35.146 35.146-35.146c19.38 0 35.147 15.767 35.147 35.146s-15.767 35.146-35.147 35.146zm371.804-85.293c-16.952 0-28.065-8.688-29.304-13.154 3.105-1.802 12.948-2.714 29.304-2.714 1.773 0 3.534.063 5.274.177.704 2.511 1.075 5.141 1.075 7.833v7.607c-2.078.166-4.199.251-6.349.251zm-73.802 85.293c-19.379 0-35.146-15.767-35.146-35.146s15.767-35.146 35.146-35.146c19.38 0 35.147 15.767 35.147 35.146s-15.767 35.146-35.147 35.146zm68.051-28.441h-18.366c.295-2.195.461-4.43.461-6.705 0-4.621-.641-9.093-1.817-13.345h31.822v7.95c0 6.672-5.428 12.1-12.1 12.1z"/><path d="m118.847 304.996c-13.522 0-24.523 11.001-24.523 24.522 0 13.522 11.001 24.523 24.523 24.523s24.523-11.001 24.523-24.523c0-13.521-11.001-24.522-24.523-24.522zm0 34.046c-5.251 0-9.523-4.272-9.523-9.523s4.272-9.522 9.523-9.522 9.523 4.271 9.523 9.522-4.272 9.523-9.523 9.523z"/><path d="m416.849 304.996c-13.522 0-24.523 11.001-24.523 24.522 0 13.522 11.001 24.523 24.523 24.523s24.523-11.001 24.523-24.523c0-13.521-11.001-24.522-24.523-24.522zm0 34.046c-5.251 0-9.523-4.272-9.523-9.523s4.272-9.522 9.523-9.522 9.523 4.271 9.523 9.522-4.272 9.523-9.523 9.523z"/><path d="m256 228.686c-4.142 0-7.5 3.357-7.5 7.5s3.358 7.5 7.5 7.5h5.2c4.142 0 7.5-3.357 7.5-7.5s-3.358-7.5-7.5-7.5z"/><path d="m143.907 228.686c-4.142 0-7.5 3.357-7.5 7.5s3.358 7.5 7.5 7.5h5.2c4.142 0 7.5-3.357 7.5-7.5s-3.358-7.5-7.5-7.5z"/>\n        </g>\n      </svg>\n    `;const t=this.element.querySelector(".car__name");this.selectBtn=new a.Buttons(["select-car"],"SELECT"),this.removeBtn=new a.Buttons(["remove-car"],"REMOVE"),this.dotA=new a.Buttons(["dot-a"],"A"),this.dotB=new a.Buttons(["dot-b"],"B"),t.appendChild(this.selectBtn.element),t.appendChild(this.removeBtn.element);const n=document.createElement("img");this.element.appendChild(n),t.appendChild(this.dotA.element),t.appendChild(this.dotB.element),n.src=i.default,this.selectBtn.onClick((()=>{c.stateManager.setCarSelect(this.carModel)})),this.removeBtn.onClick((()=>{o.garageService.deleteCar(this.carModel.id)})),this.element.querySelectorAll(".dot-b").forEach((e=>e.addEventListener("click",this.runCar))),this.element.querySelectorAll(".dot-a").forEach((e=>e.addEventListener("click",this.returnToStart.bind(this))))}}t.Car=l},222:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{c(s.next(e))}catch(e){r(e)}}function o(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CarsField=void 0,n(342);const i=n(583),r=n(990),a=n(881),o=n(166),c=n(168);class l extends i.BaseComponent{constructor(){super("div",["cars-field"]),this.nextPage=()=>{this.page++,this.element.removeChild(this.list),this.onLoadCars(this.page)},this.prevPage=()=>{this.page--,this.element.removeChild(this.list),this.onLoadCars(this.page)},this.runAllCars=()=>{this.cars.forEach((e=>e.runCar()))},this.resetAllCars=()=>{this.cars.forEach((e=>e.returnToStart()))},this.cars=[],this.page=1,this.onLoadCars(this.page),this.popup=new c.WinnerPopup,this.prevPageBtn=new o.Buttons(["prev-page__btn"],"PREV"),this.nextPageBtn=new o.Buttons(["next-page__btn"],"NEXT"),this.title=document.createElement("h1"),this.title.className="cars-field__title",this.element.appendChild(this.title),this.element.appendChild(this.prevPageBtn.element),this.element.appendChild(this.nextPageBtn.element),this.element.appendChild(this.popup.element),this.nextPageBtn.onClick(this.nextPage),this.prevPageBtn.onClick(this.prevPage)}onLoadCars(e){return s(this,void 0,void 0,(function*(){this.carsId=yield r.garageService.getCars(e),this.fieldCars(this.carsId)}))}fieldCars(e){this.list=document.createElement("ol"),e.forEach((e=>{const t=new a.Car(e);t.onFinish((()=>this.popup.show())),this.cars.push(t),this.list.appendChild(t.element)})),this.element.appendChild(this.list),this.title.textContent=`Track(${this.page})(${this.cars.length})`}}t.CarsField=l},166:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Buttons=void 0;const s=n(583);class i extends s.BaseComponent{constructor(e,t,n){super("button",e),this.element.textContent=t,n&&Object.keys(n).forEach((e=>this.element.setAttribute(e,n[e])))}onClick(e){this.element.addEventListener("click",(t=>{t.preventDefault(),e()}))}}t.Buttons=i},185:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Inputs=void 0;const s=n(583);class i extends s.BaseComponent{constructor(e,t){super("input",e),t&&Object.keys(t).forEach((e=>this.element.setAttribute(e,t[e])))}onInput(e){this.element.addEventListener("input",e)}getValInp(){return this.element.value}setValInp(e){this.element.value=e}}t.Inputs=i},785:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{c(s.next(e))}catch(e){r(e)}}function o(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Garage=void 0,n(272);const i=n(583),r=n(222),a=n(199),o=n(990),c=n(657),l=n(166),h=n(957),u=n(197);class d extends i.BaseComponent{constructor(){super("div",["garage"]),this.element.innerHTML="\n      <h1>Garage</h1>\n    ",this.carsField=new r.CarsField,this.router=new h.Router(u.routes,this.element),this.carParamsInput=new a.CarParamsInput(["create-car__params__field"],"CREATE"),this.carParamsInput.onSubmit((e=>s(this,void 0,void 0,(function*(){yield o.garageService.createCar(e),this.router.run()})))),this.upCarParamsInput=new a.CarParamsInput(["up-car__params__field"],"UPDATE"),this.upCarParamsInput.onSubmit((e=>s(this,void 0,void 0,(function*(){const t=c.stateManager.getCarSelect().id;yield o.garageService.upCar(t,e),this.router.run()})))),c.stateManager.subscribe((()=>{const e=c.stateManager.getCarSelect();e&&this.upCarParamsInput.setFormInfo(e)})),this.race=new l.Buttons(["race-car__btn"],"RACE"),this.reset=new l.Buttons(["reset-car__btn"],"RESET"),this.generateCars=new l.Buttons(["generate-car__btn"],"GENERATE"),this.element.appendChild(this.carParamsInput.element),this.element.appendChild(this.upCarParamsInput.element),this.element.appendChild(this.race.element),this.element.appendChild(this.reset.element),this.element.appendChild(this.generateCars.element),this.element.appendChild(this.carsField.element),this.race.onClick(this.carsField.runAllCars),this.reset.onClick(this.carsField.resetAllCars)}}t.Garage=d},977:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0,n(528);const s=n(583);class i extends s.BaseComponent{constructor(){super("header",["header"]),this.element.innerHTML='\n      <nav class="menu-game">\n        <a href="#/garage-page" class="menu__link">Garage</a>\n        <a href="#/winners-page" class="menu__link">Winners</a>\n      </nav>\n      '}}t.Header=i},743:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Main=void 0;const s=n(583),i=n(957),r=n(197);class a extends s.BaseComponent{constructor(){super("main",["app"]),this.router=new i.Router(r.routes,this.element),this.router.run()}}t.Main=a},168:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WinnerPopup=void 0,n(171);const s=n(583);class i extends s.BaseComponent{constructor(){super("div",["popup_win"]),this.hide=()=>{this.element.classList.remove("open"),document.removeEventListener("keydown",this.onKeydown)},this.onKeydown=e=>{27===e.keyCode&&this.hide()},this.element.innerHTML='\n    <div class="popup__backdrop_win">\n        <div class="popup__content_win">\n          <div class="popup__text">\n              <h1>FINISH</h1>\n              <a href="#/winners-page" class="menu__link">OK</a>\n          </div>\n        </div>\n    </div>\n    '}show(){this.element.classList.add("open"),document.addEventListener("keydown",this.onKeydown)}}t.WinnerPopup=i},957:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Router=void 0,t.Router=class{constructor(e,t){this.routes=e,this.container=t}run(){window.onpopstate=this.onChangeRoute.bind(this),this.onChangeRoute()}onChangeRoute(){const e=this.routes.find((e=>e.path===window.location.hash.split("/")[1]));e?this.renderComponent(e.getComponent()):this.renderComponent(this.routes[0].getComponent())}renderComponent(e){this.container.innerHTML="",this.container.appendChild(e)}}},197:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.routes=void 0;const s=n(785),i=n(287);t.routes=[{path:"garage-page",getComponent:()=>(new s.Garage).element},{path:"winners-page",getComponent:()=>(new i.Winners).element}]},287:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Winners=void 0,n(102);const s=n(583);class i extends s.BaseComponent{constructor(){super("div",["winners"]),this.element.innerHTML="\n      <h1>Winners</h1>\n    "}}t.Winners=i},990:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{c(s.next(e))}catch(e){r(e)}}function o(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.garageService=t.GarageService=void 0;const i=n(122);class r{constructor(e){this.service=e}getCars(e=1){return s(this,void 0,void 0,(function*(){const t={_page:e,_limit:7},n=yield this.service.get("/garage",t);return yield n.json()}))}createCar(e){return s(this,void 0,void 0,(function*(){const t=yield this.service.post("/garage",e);return yield t.json()}))}deleteCar(e){return s(this,void 0,void 0,(function*(){yield this.service.delete(`/garage/${e}`)}))}upCar(e,t){return s(this,void 0,void 0,(function*(){const n=yield this.service.put(`/garage/${e}`,t);return yield n.json()}))}}t.GarageService=r,t.garageService=new r(i.restService)},122:function(e,t){var n=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,r){function a(e){try{c(s.next(e))}catch(e){r(e)}}function o(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.restService=t.RestService=void 0;class s{constructor(){this.baseURL="http://127.0.0.1:3000"}get(e,t){return n(this,void 0,void 0,(function*(){const n=this.createURL(e,t);return yield fetch(n)}))}post(e,t){return n(this,void 0,void 0,(function*(){const n=this.createURL(e);return yield fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}))}put(e,t){return n(this,void 0,void 0,(function*(){const n=this.createURL(e);return yield fetch(n,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}))}delete(e){return n(this,void 0,void 0,(function*(){const t=this.createURL(e);return yield fetch(t,{method:"DELETE"})}))}createURL(e,t){let n=`${this.baseURL}${e}`;return t&&(n+=Object.keys(t).reduce(((e,n,s)=>`${e}${0===s?"":"&"}${n}=${t[n]}`),"?")),n}}t.RestService=s,t.restService=new s},657:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.stateManager=void 0,t.stateManager=new class{constructor(){this.subscribers=[],this.state={garage:{carSelect:{name:"",color:"",id:-1}}}}subscribe(e){this.subscribers.push(e)}callSubscribers(){this.subscribers.forEach((e=>e(this.state)))}getCarSelect(){return this.state.garage.carSelect}setCarSelect(e){this.state.garage.carSelect=e,this.callSubscribers()}}},90:(e,t,n)=>{e.exports=n.p+"assets/42fcd61212c74abd8695.svg"}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,n),r.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var s=t.getElementsByTagName("script");s.length&&(e=s[s.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{n(373);const e=n(752);window.onload=()=>{const t=document.body;if(!t)throw new Error("App root element not found");new e.App(t)}})()})();